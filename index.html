<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø£ÙˆØ±ÙŠØ¬ - Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆÙ‚Øª</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">

<!-- Firebase (compat) -->
<script src="https://www.gstatic.com/firebasejs/9.24.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.24.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.24.0/firebase-firestore-compat.js"></script>

<style>
body {
    font-family: 'Cairo', sans-serif;
    margin: 0;
    display: flex;
    min-height: 100vh;
    transition: background 1s;
    background: #fff;
    color: #000;
}

nav {
    width: 220px;
    background: #000;
    color: #fff;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    padding-top: 20px;
}

nav button {
    background: none;
    border: none;
    color: #fff;
    padding: 15px 20px;
    width: 100%;
    text-align: right;
    font-size: 1.1em;
    cursor: pointer;
    transition: background 0.3s, transform 0.2s;
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    align-items: center;
}

nav button:hover {
    background: #222;
    transform: scale(1.03);
}

main {
    flex: 1;
    padding: 20px;
    overflow-x: hidden;
}

h2 {
    margin-top: 0;
    font-size: 2em;
}

.btn {
    display: inline-block;
    background-color: #000;
    color: #fff;
    padding: 12px 25px;
    margin: 15px 0;
    border-radius: 8px;
    font-size: 1.1em;
    transition: all 0.3s;
    cursor: pointer;
    text-decoration: none;
}

.btn:hover {
    background-color: #444;
    transform: scale(1.05);
}

#tasks input[type="text"] {
    padding: 10px;
    width: 70%;
    font-size: 1em;
}

#tasks button {
    padding: 10px 20px;
    font-size: 1em;
    margin-left: 10px;
    border-radius: 6px;
    border: none;
    background-color: black;
    color: white;
    cursor: pointer;
    transition: all 0.3s;
}

#tasks button:hover {
    background-color: #444;
    transform: scale(1.05);
}

ul {
    list-style: none;
    padding: 0;
    margin-top: 15px;
}

li {
    background-color: #fff;
    padding: 10px;
    margin-bottom: 8px;
    border-radius: 6px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border: 1px solid #000;
    transition: all 0.3s;
}

li button {
    background-color: red;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    padding: 5px 10px;
    transition: all 0.3s;
}

li button:hover {
    background-color: darkred;
    transform: scale(1.1);
}

#focus {
    margin-top: 20px;
    padding: 20px;
    border-radius: 8px;
    display: inline-block;
    text-align: center;
}

#timer {
    font-size: 3em;
    margin: 15px 0;
}

section {
    transition: opacity 0.5s;
}

</style>
</head>
<body>

<nav>
    <button onclick="showSection('home')">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
    <button onclick="showSection('tasks')">ğŸ“‹ Ø§Ù„Ù…Ù‡Ø§Ù…</button>
    <button onclick="showSection('focus')">â±ï¸ Ø§Ù„ØªØ±ÙƒÙŠØ²</button>
    <button onclick="showSection('contact')">ğŸ“§ ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</button>
    <button onclick="signOut()">ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
</nav>

<main>
    <section id="home">
        <h2>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø£ÙˆØ±ÙŠØ¬!</h2>
        <p>Ù‡Ù†Ø§ ØªÙ‚Ø¯Ø± ØªÙ†Ø¸Ù… ÙˆÙ‚ØªÙƒ ÙˆØªØ²ÙŠØ¯ ØªØ±ÙƒÙŠØ²Ùƒ. Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„Ùƒ Ø¹Ø´Ø§Ù† ØªØ¨Ø¯Ø§ ØªØ¬Ø±Ø¨ØªÙƒ Ø§Ù„Ø´Ø®ØµÙŠØ©.</p>
        <button class="btn" onclick="signInGoogle()">ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Google</button>
    </section>

    <section id="tasks" style="display:none">
        <h2>Ù…Ù‡Ø§Ù…Ùƒ Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</h2>
        <input type="text" id="taskInput" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ù…Ù‡Ù…Ø© Ù‡Ù†Ø§">
        <button onclick="addTask()">Ø£Ø¶Ù</button>
        <ul id="taskList"></ul>
    </section>

    <section id="focus" style="display:none">
        <h2>ÙˆØ¶Ø¹ Ø§Ù„ØªØ±ÙƒÙŠØ²</h2>
        <div id="timer">25:00</div>
        <button class="btn" onclick="startTimer()">Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ±ÙƒÙŠØ²</button>
        <button class="btn" onclick="resetTimer()">Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø·</button>
    </section>

    <section id="contact" style="display:none">
        <h2>ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</h2>
        <p>Ù„Ø£ÙŠ Ø³Ø¤Ø§Ù„ Ø£Ùˆ Ø§Ù‚ØªØ±Ø§Ø­: 
            <a href="mailto:orig2025o@gmail.com">orig2025o@gmail.com</a>
        </p>
    </section>
</main>

<script>
    // ===================== Firebase Config =====================
    const firebaseConfig = {
        apiKey: "AIzaSyCUlmAYy6Hus6MxPs8vfV3k7cPnYy9nsig",
        authDomain: "orig2025.firebaseapp.com",
        projectId: "orig2025",
        storageBucket: "orig2025.firebasestorage.app",
        messagingSenderId: "995145495839",
        appId: "1:995145495839:web:58390aea2af0da115d2c2a",
        measurementId: "G-8RR9WKTP54"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    // ===================== ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Google =====================
    function signInGoogle() {
        const provider = new firebase.auth.GoogleAuthProvider();
        auth.signInWithPopup(provider)
            .then(result => {
                const user = result.user;
                alert("Ù…Ø±Ø­Ø¨Ø§Ù‹ " + user.displayName);
                loadTasks();
                showSection('tasks');
            })
            .catch(console.log);
    }

    function signOut() {
        auth.signOut().then(()=> {
            alert("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬");
            showSection('home');
        });
    }

    // ===================== ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… =====================
    function showSection(sectionId) {
        document.querySelectorAll('main section').forEach(sec => {
            sec.style.display = 'none';
        });
        document.getElementById(sectionId).style.display = 'block';
    }

    // ===================== Ø§Ù„Ù…Ù‡Ø§Ù… =====================
    let currentUser = null;

    auth.onAuthStateChanged(user => {
        if(user){
            currentUser = user;
            loadTasks();
        }
    });

    function addTask() {
        const input = document.getElementById('taskInput');
        const taskText = input.value.trim();
        if(taskText === "") return alert("Ø§ÙƒØªØ¨ Ø§Ù„Ù…Ù‡Ù…Ø© Ø£ÙˆÙ„!");
        const taskRef = db.collection("tasks").doc(currentUser.uid).collection("myTasks");
        taskRef.add({ text: taskText }).then(() => {
            input.value = "";
            loadTasks();
        });
    }

    function loadTasks() {
        if(!currentUser) return;
        const taskList = document.getElementById('taskList');
        taskList.innerHTML = "";
        const taskRef = db.collection("tasks").doc(currentUser.uid).collection("myTasks");
        taskRef.get().then(snapshot => {
            snapshot.forEach(doc => {
                const li = document.createElement('li');
                li.textContent = doc.data().text;
                const btn = document.createElement('button');
                btn.textContent = "Ø­Ø°Ù";
                btn.onclick = () => {
                    taskRef.doc(doc.id).delete().then(()=> loadTasks());
                };
                li.appendChild(btn);
                taskList.appendChild(li);
            });
        });
    }

    // ===================== Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØªØ±ÙƒÙŠØ² =====================
    let timerInterval;
    let totalSeconds = 25 * 60; 

    function startTimer() {
        clearInterval(timerInterval);
        timerInterval = setInterval(() => {
            if(totalSeconds <= 0){
                clearInterval(timerInterval);
                alert("Ø§Ù†ØªÙ‡Ù‰ ÙˆÙ‚Øª Ø§Ù„ØªØ±ÙƒÙŠØ²! ğŸ˜");
                totalSeconds = 25*60;
                updateTimer();
                return;
            }
            totalSeconds--;
            updateTimer();
        }, 1000);
    }

    function resetTimer() {
        clearInterval(timerInterval);
        totalSeconds = 25*60;
        updateTimer();
    }

    function updateTimer() {
        const minutes = Math.floor(totalSeconds / 60);
        const seconds = totalSeconds % 60;
        document.getElementById('timer').textContent = 
            `${minutes.toString().padStart(2,'0')}:${seconds.toString().padStart(2,'0')}`;
    }

    updateTimer();

    // ===================== Ø®Ù„ÙÙŠØ§Øª Ù…ØªØºÙŠØ±Ø© =====================
    const backgrounds = ["#ffffff", "#f2f2f2", "#e6e6e6", "#cccccc"];
    let bgIndex = 0;
    setInterval(() => {
        document.body.style.background = backgrounds[bgIndex];
        bgIndex = (bgIndex + 1) % backgrounds.length;
    }, 5000);

</script>
</body>
</html>
